
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	УстановитьПривилегированныйРежим(Истина);
	
	//Если Параметры.Свойство("") = ЛОЖЬ Тогда
	//	Возврат;	
	//КонецЕсли;
	//
	//ОбъектСсылка = git_ПереопределениеОбработчиковСервер.ПолучитьСсылкуНаВнешнийОбъект("УправлениеАссортиментнымиМатрицами"); 
	
	ОбъектОбработки = РеквизитФормыВЗначение("Объект");  	
	МассивФорматов   			   = ОбъектОбработки.ПолучитьФорматыМагазинов();  	
	ЗначениеВРеквизитФормы(ОбъектОбработки, "Объект");
	
	//СоздатьДополнительныеРеквизитыФормы(МассивФорматов);
	//СоздатьДополнительныеЭлементыФормы(МассивСкладов, ИдентификаторТранзитногоСклада);

КонецПроцедуры

&НаКлиенте
Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
	
	
КонецПроцедуры

&НаСервере
Процедура ПриЗагрузкеДанныхИзНастроекНаСервере(Настройки)
	
		
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовФормы


#КонецОбласти

#Область СлужебныеПроцедурыИФункции

#Область Инициализация_формы

// Процедура создает дополнительные реквизиты формы для дерева распределения.
//
// Параметры:
//  МассивФорматов - Массив - cодержит структуры со свойствами:
//   * АМ_ФорматыМагазинов - СправочникСсылка.АМ_ФорматыМагазинов - ссылка на АМ_ФорматыМагазинов.
//
//&НаСервере
//Процедура СоздатьДополнительныеРеквизитыФормы(МассивФорматов)

//	ОбъектОбработки  			   = РеквизитФормыВЗначение("Объект");
//	МассивРеквизитов 			   = Новый Массив;
//	МассивТипов					   = Новый Массив;
//	
//	МассивТипов.Добавить(Тип("СправочникСсылка.ТоварныеКатегории"));  
//	МассивТипов.Добавить(Тип("СправочникСсылка.Номенклатура"));
//	МассивТипов.Добавить(Тип("СправочникСсылка.Производитель"));	
//	МассивТипов.Добавить(Тип("Строка"));
//	
//	//МассивРеквизитов.Добавить(Новый РеквизитФормы("ДеревоРаспределения", Новый ОписаниеТипов("ДеревоЗначений")));
//	МассивРеквизитов.Добавить(Новый РеквизитФормы("ИндексКартинки", Новый ОписаниеТипов("Число"), "ДеревоРаспределения"));
//	МассивРеквизитов.Добавить(Новый РеквизитФормы("Код", Новый ОписаниеТипов("Строка"), "ДеревоРаспределения", "Код"));
//	МассивРеквизитов.Добавить(Новый РеквизитФормы("Артикул", Новый ОписаниеТипов("Строка"), "ДеревоРаспределения", "Артикул"));
//	МассивРеквизитов.Добавить(Новый РеквизитФормы("Номенклатура", Новый ОписаниеТипов(МассивТипов), "ДеревоРаспределения", "Номенклатура"));
//	МассивРеквизитов.Добавить(Новый РеквизитФормы("РедактироватьКоличество", Новый ОписаниеТипов("Булево"), "ДеревоРаспределения"));
//	МассивРеквизитов.Добавить(Новый РеквизитФормы("ДНС", Новый ОписаниеТипов("Число",,, Новый КвалификаторыЧисла(10,0)), "ДеревоРаспределения", "ДНС"));
//	
//	МассивРеквизитов.Добавить(Новый РеквизитФормы("ожид_"+ИдентификаторТранзитногоСклада, Новый ОписаниеТипов("Число",,, Новый КвалификаторыЧисла(15,0)), "ДеревоРаспределения", "Ож."));
//	МассивРеквизитов.Добавить(Новый РеквизитФормы("остат_"+ИдентификаторТранзитногоСклада, Новый ОписаниеТипов("Число",,, Новый КвалификаторыЧисла(15,0)), "ДеревоРаспределения", "Ост."));
//	МассивРеквизитов.Добавить(Новый РеквизитФормы("пер_"+ИдентификаторТранзитногоСклада, Новый ОписаниеТипов("Число",,, Новый КвалификаторыЧисла(15,0)), "ДеревоРаспределения", "Пер."));
//	
//	Для каждого РозничныйСклад Из МассивСкладов Цикл
//		ИдентификаторСклада = ОбъектОбработки.ПолучитьСтрокуИдентификатораСсылки(РозничныйСклад);
//		МассивРеквизитов.Добавить(Новый РеквизитФормы("кол_"+ИдентификаторСклада, Новый ОписаниеТипов("Число",,, Новый КвалификаторыЧисла(15,0,ДопустимыйЗнак.Неотрицательный)), "ДеревоРаспределения", "Кол."));
//		МассивРеквизитов.Добавить(Новый РеквизитФормы("колдоп_"+ИдентификаторСклада, Новый ОписаниеТипов("Число",,, Новый КвалификаторыЧисла(15,0)), "ДеревоРаспределения", "КолДоп."));
//		МассивРеквизитов.Добавить(Новый РеквизитФормы("квота_"+ИдентификаторСклада, Новый ОписаниеТипов("Число",,, Новый КвалификаторыЧисла(15,0)), "ДеревоРаспределения", "Квота"));
//		МассивРеквизитов.Добавить(Новый РеквизитФормы("ожид_"+ИдентификаторСклада, Новый ОписаниеТипов("Число",,, Новый КвалификаторыЧисла(15,0)), "ДеревоРаспределения", "Ож."));
//		МассивРеквизитов.Добавить(Новый РеквизитФормы("остат_"+ИдентификаторСклада, Новый ОписаниеТипов("Число",,, Новый КвалификаторыЧисла(15,0)), "ДеревоРаспределения", "Ост."));
//		МассивРеквизитов.Добавить(Новый РеквизитФормы("пред_"+ИдентификаторСклада, Новый ОписаниеТипов("Число",,, Новый КвалификаторыЧисла(15,0)), "ДеревоРаспределения", "Пред."));
//		МассивРеквизитов.Добавить(Новый РеквизитФормы("виделять_"+ИдентификаторСклада, Новый ОписаниеТипов("Булево"), "ДеревоРаспределения"));
//	КонецЦикла; 
//	
//	ИзменитьРеквизиты(МассивРеквизитов);
//	
//	ЗначениеВРеквизитФормы(ОбъектОбработки, "Объект");
//	
//КонецПроцедуры // СоздатьДополнительныеРеквизитыИЭлементыФормы()

//// Процедура создает дополнительные элементы формы для дерева распределения.
////
//// Параметры:
////  МассивСкладов - Массив - cодержит структуры со свойствами:
////   * Склад - СправочникСсылка.Склады - ссылка на розничный склад.
////  ИдентификаторТранзитногоСклада - Строка - строковой идентиифкатор склада, используется как имя реквизита дерева распределения.
////
//&НаСервере
//Процедура СоздатьДополнительныеЭлементыФормы(МассивСкладов, ИдентификаторТранзитногоСклада)
//		
//	ЭлементДеревоРаспределения = Элементы.ДеревоРаспределения;
//	
//	ПараметрыЭлемента = Новый Структура;
//	ПараметрыЭлемента.Вставить("Имя", "Номенклатура");	
//	ПараметрыЭлемента.Вставить("ПутьКДанным", "ДеревоРаспределения.Номенклатура");
//	ПараметрыЭлемента.Вставить("ЦветФона", Новый Цвет(255, 250, 205));
//	ПараметрыЭлемента.Вставить("ТипЭлемента", Тип("ПолеФормы"));
//	ПараметрыЭлемента.Вставить("Заголовок", "Номенклатура");
//	ПараметрыЭлемента.Вставить("Ширина", 60);
//	ПараметрыЭлемента.Вставить("ФиксацияВТаблице", ФиксацияВТаблице.Лево);
//	git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ЭлементДеревоРаспределения);
//	
//	ПараметрыЭлемента = Новый Структура;
//	ПараметрыЭлемента.Вставить("Имя", "Код");	
//	ПараметрыЭлемента.Вставить("ПутьКДанным", "ДеревоРаспределения.Код");
//	ПараметрыЭлемента.Вставить("ЦветФона", Новый Цвет(255, 250, 205));
//	ПараметрыЭлемента.Вставить("ТипЭлемента", Тип("ПолеФормы"));
//	ПараметрыЭлемента.Вставить("Ширина", 10);
//	ПараметрыЭлемента.Вставить("Заголовок", "Код");
//	ПараметрыЭлемента.Вставить("ФиксацияВТаблице", ФиксацияВТаблице.Лево);
//	git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ЭлементДеревоРаспределения);
//	
//	ПараметрыЭлемента = Новый Структура;
//	ПараметрыЭлемента.Вставить("Имя", "Артикул");	
//	ПараметрыЭлемента.Вставить("ПутьКДанным", "ДеревоРаспределения.Артикул");
//	ПараметрыЭлемента.Вставить("ЦветФона", Новый Цвет(255, 250, 205));
//	ПараметрыЭлемента.Вставить("ТипЭлемента", Тип("ПолеФормы"));
//	ПараметрыЭлемента.Вставить("Ширина", 10);
//	ПараметрыЭлемента.Вставить("Заголовок", "Артикул");
//	ПараметрыЭлемента.Вставить("ФиксацияВТаблице", ФиксацияВТаблице.Лево);
//	git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ЭлементДеревоРаспределения);
//	
//	
//	// Транзитный склад
//	
//	ПараметрыЭлемента = СтруктураПараметровГруппыКолонок("группа_"+ИдентификаторТранзитногоСклада, ТранзитныйСклад.Наименование, ФиксацияВТаблице.Лево);
//	ГруппаКолонок = git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ЭлементДеревоРаспределения);
//	
//	Подсказка = НСтр("ru='Количество ожидаемого товара на складе'", ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());
//	ПараметрыЭлемента = СтруктураПараметровКолонки("ожид_"+ИдентификаторТранзитногоСклада, Новый Цвет(255, 228, 225), Истина, Подсказка, , Новый Шрифт(,, Истина));
//	git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ГруппаКолонок);
//	
//	Подсказка = НСтр("ru='Количество дней на складе'", ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());
//	ПараметрыЭлемента = СтруктураПараметровКолонки("ДНС", Новый Цвет(230, 230, 250), Истина, Подсказка, , Новый Шрифт(,, Истина));
//	git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ГруппаКолонок);
//	
//	Подсказка = НСтр("ru='Остаток на складе'", ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());
//	ПараметрыЭлемента = СтруктураПараметровКолонки("остат_"+ИдентификаторТранзитногоСклада, Новый Цвет(204, 255, 204), Истина, Подсказка, , Новый Шрифт(,, Истина));
//	git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ГруппаКолонок);
//	
//	Подсказка = НСтр("ru='Количество товара указаного к перемещению'", ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());
//	ПараметрыЭлемента = СтруктураПараметровКолонки("пер_"+ИдентификаторТранзитногоСклада, Новый Цвет(255, 250, 205), Истина, Подсказка, , Новый Шрифт(,, Истина));
//	git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ГруппаКолонок);
//	
//	ОбъектОбработки = РеквизитФормыВЗначение("Объект"); 
//	
//	ГСЧ = Новый ГенераторСлучайныхЧисел;
//	
//	Для каждого РозничныйСклад Из МассивСкладов Цикл
//		
//		ЦветФонаЗаголовка = ГСЧ.СлучайноеЧисло(0, 255);
//		
//		ИдентификаторСклада = ОбъектОбработки.ПолучитьСтрокуИдентификатораСсылки(РозничныйСклад);
//		
//		ПараметрыЭлемента = СтруктураПараметровГруппыКолонок("группа_"+ИдентификаторСклада, РозничныйСклад, ФиксацияВТаблице.Нет, ЦветФонаЗаголовка);
//		ГруппаКолонок 	  = git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ЭлементДеревоРаспределения);
//		
//		Подсказка = НСтр("ru='Укажите количество товара для перемещения'", ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());
//		ПараметрыЭлемента = СтруктураПараметровКолонки("кол_"+ИдентификаторСклада, Новый Цвет(255, 235, 205), Ложь, Подсказка, ЦветФонаЗаголовка);
//		ЭлементКоличество = git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ГруппаКолонок);
//		ЭлементДеревоРаспределения.УстановитьДействие("ПриИзменении", "Подключаемый_ЭлементКоличествоПриИзменении");
//		
//		Подсказка = НСтр("ru='Количество квоты товара'", ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());
//		ПараметрыЭлемента = СтруктураПараметровКолонки("квота_"+ИдентификаторСклада, Новый Цвет(255, 240, 245), Истина, Подсказка, ЦветФонаЗаголовка);
//		git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ГруппаКолонок);
//		
//		Подсказка = НСтр("ru='Представленность товаров на складе'", ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());
//		ПараметрыЭлемента = СтруктураПараметровКолонки("пред_"+ИдентификаторСклада, Новый Цвет(255, 228, 181), Истина , Подсказка, ЦветФонаЗаголовка);
//		git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ГруппаКолонок);
//		
//		Подсказка = НСтр("ru='Количество ожидаемого товара на складе'", ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());
//		ПараметрыЭлемента = СтруктураПараметровКолонки("ожид_"+ИдентификаторСклада, Новый Цвет(255, 228, 225), Истина, Подсказка, ЦветФонаЗаголовка);
//		git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ГруппаКолонок);
//		
//		Подсказка = НСтр("ru='Остаток на складе'", ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());
//		ПараметрыЭлемента = СтруктураПараметровКолонки("остат_"+ИдентификаторСклада, Новый Цвет(204, 255, 204), Истина, Подсказка, ЦветФонаЗаголовка);
//		git_ПереопределениеОбработчиковСервер.ДобавитьЭлементВКоллекциюЭлементовФормы(Элементы, ПараметрыЭлемента, ГруппаКолонок);
//		
//	КонецЦикла;
//	
//	ЗначениеВРеквизитФормы(ОбъектОбработки, "Объект");
//	
//КонецПроцедуры // СоздатьДополнительныеЭлементыФормы()


#КонецОбласти 

#КонецОбласти

