
#Область ИнтерфейсАвтоматическихТестов
	
&НаКлиенте
Перем ЮнитТест;

&НаКлиенте
Функция ПолучитьСписокТестов(ЮнитТестирование) Экспорт
	
	ЮнитТест = ЮнитТестирование;
	
	СписокТестов = Новый Массив;
	
	Возврат СписокТестов;
	
КонецФункции

#КонецОбласти


#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	УстановитьПривилегированныйРежим(Истина);
	
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	Если ТипЗнч(Параметры.Номенклатура) <> Тип("СправочникСсылка.Номенклатура") ИЛИ Параметры.Номенклатура.Пустая() Тогда
		Отказ = Истина;
		Возврат;
	КонецЕсли;
	
	Если ПустаяСтрока(Параметры.ИмяКолонки) Тогда
		Отказ = Истина;
		Возврат;
	КонецЕсли;
	
	ОбработкаОбъект = РеквизитФормыВЗначение("Объект");
	
	ИдентификаторСклада = ОбработкаОбъект.УникальныйИдентификаторИзСтроки("ожид_", Параметры.ИмяКолонки);
	СправочникСсылка    = Справочники.Склады.ПолучитьСсылку(ИдентификаторСклада);
	СписокНоменклатуры  = ОбработкаОбъект.ТаблицаОжидаемыхТоваров(Параметры.Номенклатура, СправочникСсылка);
	
	ДанныеРасшифровки = ОбработкаОбъект.ВывестиОтчетВДокумент(Результат, СписокНоменклатуры, "СписокНоменклатуры", "ОтчетПоОстаткам", УникальныйИдентификатор);
	
	ЗначениеВРеквизитФормы(ОбработкаОбъект, "Объект");
	
КонецПроцедуры

&НаКлиенте
Процедура РезультатОбработкаРасшифровки(Элемент, Расшифровка, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	ОткрытьЗначение(ПолучитьДаныеРасшифовки(Расшифровка));
КонецПроцедуры

&НаСервере
Функция ПолучитьДаныеРасшифовки(Расшифровка)
	УстановитьПривилегированныйРежим(Истина);
	ДанныеРасшифровкиОбъект = ПолучитьИзВременногоХранилища(ДанныеРасшифровки);
	ЭементыРасшифровки      = ДанныеРасшифровкиОбъект.Элементы[Расшифровка];
	Возврат ЭементыРасшифровки.ПолучитьПоля()[0].Значение;
КонецФункции // ПолучитьДаныеРасшифовки()
 

#КонецОбласти