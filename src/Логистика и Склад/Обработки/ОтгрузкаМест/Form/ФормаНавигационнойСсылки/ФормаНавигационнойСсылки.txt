#Область ИнтерфейсАвтоматическихТестов

&НаКлиенте
Перем ЮнитТест;

&НаКлиенте
Функция ПолучитьСписокТестов(ЮнитТестирование) Экспорт
	
	ЮнитТест = ЮнитТестирование;
	
	СписокТестов = Новый Массив;
	
	ПараметрыТеста = Новый Структура("ИмяТеста, Транзакция, Параметр", "Тест_Заглушка");
	СписокТестов.Добавить(ПараметрыТеста);
	
	Возврат СписокТестов;
	
КонецФункции

&НаКлиенте
Функция Тест_Заглушка(Параметр) Экспорт
	ЮнитТест.ПроверитьИстину(Истина,);
КонецФункции // Тест_Заглушка()

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура НавигационнаяСсылкаОкончаниеВводаТекста(Элемент, Текст, ДанныеВыбора, СтандартнаяОбработка)
	Если Не ПустаяСтрока(Текст) Тогда 
		ДокументСсылка = ПолучитьСсылкуНаДокумент(Текст);
		Если Не ДокументСсылка=Неопределено Тогда 
			Закрыть(ДокументСсылка);
		КонецЕсли;
	Иначе 
		Закрыть();
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Функция ПолучитьСсылкуНаДокумент(стрНавигационнаяССылка) 
	Результат				=	Неопределено;
	ПозицияНачалаНавССылки	=	Найти(стрНавигационнаяССылка,"?ref=");
	Если ПозицияНачалаНавССылки<>0 тогда      
		УидНавССылки	=	Сред(стрНавигационнаяССылка,ПозицияНачалаНавССылки+5,32);
		УИД				=	Прав(УидНавССылки,8)+"-"+Сред(УидНавССылки,21,4)+"-"+Сред(УидНавССылки,17,4)+"-"+Лев(УидНавССылки,4)+"-"+Сред(УидНавССылки,5,12);
	КонецЕсли;
	
	Если ПустаяСтрока(УИД) Тогда 
		 Возврат Неопределено;
	КонецЕсли;
	
	ПозицияНачалаДокумента=Найти(стрНавигационнаяССылка,"Документ.");
	Если ПозицияНачалаДокумента<>0 тогда 
		Документ = Сред(стрНавигационнаяССылка,ПозицияНачалаДокумента+9,ПозицияНачалаНавССылки-ПозицияНачалаДокумента-9);
		СтрокаДляВыполнения = "ДокументСсылка = Документы."+Документ+".ПолучитьСсылку(Новый УникальныйИдентификатор("""+УИД+"""))";
  		ДокументСсылка = Неопределено;
		Выполнить(СтрокаДляВыполнения);
	КонецЕсли;
	
	Возврат ДокументСсылка;
	
КонецФункции

#КонецОбласти
