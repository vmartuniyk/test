

#Область ИнтерфейсАвтоматическихТестов

&НаКлиенте
Перем ЮнитТест;

&НаКлиенте
Функция ПолучитьСписокТестов(ЮнитТестирование) Экспорт
	
	ЮнитТест = ЮнитТестирование;
	
	СпиокТестов = Новый Массив;	
	Возврат СпиокТестов;
	
КонецФункции

#КонецОбласти


#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	УстановитьПривилегированныйРежим(Истина);
	
	ЗаполнитьРеквизитыФормы();
	
	ЗаполнитьТаблицуАдресатов();
	
КонецПроцедуры

#КонецОбласти


#Область ОбработчикиСобытийЭлементовТаблицыФормы_Адресаты

&НаКлиенте
Процедура АдресатыКонтактНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	ТекущиеДанные 		 = Элементы.Адресаты.ТекущиеДанные;
	ВзаимодействияКлиент.ВыбратьКонтакт(Неопределено, ТекущиеДанные.КакСвязаться, ТекущиеДанные.ПредставлениеКонтакта, ТекущиеДанные.Контакт, Ложь, Ложь, Истина);
КонецПроцедуры

#КонецОбласти


#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ЗаполнитьРеквизитыФормы()
	Ответственный = ПараметрыСеанса.ТекущийПользователь;	
КонецПроцедуры // ЗапонитьРеквизитыФормы()

&НаСервере
Процедура ЗаполнитьТаблицуАдресатов()

	Партнер = Параметры.ЗаявкаСервисногоЦентра.ЗаказчикРемонта;
	
	Если Партнер = Справочники.Партнеры.НашеПредприятие Тогда
		Возврат;
	КонецЕсли;
	
	НоваяСтрока 		= Адресаты.Добавить();
	НоваяСтрока.Контакт = Партнер;
	ВзаимодействияВызовСервера.ПолучитьПредставлениеИВсюКонтактнуюИнформациюКонтакта(НоваяСтрока.Контакт, НоваяСтрока.ПредставлениеКонтакта, НоваяСтрока.КакСвязаться);

КонецПроцедуры // ЗаполнитьКонтактнуюИнфорацию()

#КонецОбласти