
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ОбработкаОбъект = ПолучитьИзВременногоХранилища(Параметры.ОбработкаАдрес);
	ТаблицаОтделений.Загрузить(ОбработкаОбъект.ТаблицаОтделений.Выгрузить());
	
	НайденныеСтроки = ТаблицаОтделений.НайтиСтроки(Параметры.СтруктураОтделения);
	Если НайденныеСтроки.Количество() <> 0 Тогда 
		Элементы.ТаблицаОтделений.ТекущаяСтрока = НайденныеСтроки[0].ПолучитьИдентификатор();
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ТаблицаОтделенийВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	ОтправитьРезультат();
КонецПроцедуры

&НаКлиенте
Процедура Выбор(Команда)
	Если Не Элементы.ТаблицаОтделений.ТекущаяСтрока = Неопределено Тогда 
		ОтправитьРезультат();
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ОтправитьРезультат()
	СтруктураОтвет = Новый Структура;
	СтруктураОтвет.Вставить("Город",Элементы.ТаблицаОтделений.ТекущиеДанные.Город);
	СтруктураОтвет.Вставить("НомерОтделения",Элементы.ТаблицаОтделений.ТекущиеДанные.НомерОтделения);
	Закрыть(СтруктураОтвет);
КонецПроцедуры

&НаКлиенте
Процедура Отмена(Команда)
	Закрыть();
КонецПроцедуры
