
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Документ = Строка(Параметры.Документ);
	
	СуммаБезСкидки 	= Формат(Параметры.Сумма, "ЧДЦ=2");
	СуммаСоСкидкой 	= 0;
	Скидка			= 0;
	
	Элементы.ВалютаСкидки.Заголовок			= Параметры.Валюта.Наименование;
	Элементы.ВалютаСуммы.Заголовок 			= Параметры.Валюта.Наименование;
	Элементы.ВалютаСуммаСоСкидкой.Заголовок	= Параметры.Валюта.Наименование;
	Элементы.ВалютаПервогоВзноса.Заголовок	= Параметры.Валюта.Наименование;
	
	Сумма = Параметры.Сумма;
	
КонецПроцедуры

&НаКлиенте
Процедура ДокументНажатие(Элемент, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	
КонецПроцедуры





&НаКлиенте
Процедура ПроцентСкидкиПриИзменении(Элемент)
	
	СуммаБезСкидки	= Формат(Сумма - ПервыйВзнос, "ЧДЦ=2");
	Скидка 			= Формат((Сумма - ПервыйВзнос) * ПроцентСкидки * 0.01, "ЧДЦ=2");
	СуммаСоСкидкой  = Формат((Сумма - ПервыйВзнос) - ((Сумма - ПервыйВзнос) * ПроцентСкидки * 0.01), "ЧДЦ=2");
	
КонецПроцедуры





&НаКлиенте
Процедура Установить(Команда)
	
	СтруктураВозврат = Новый Структура;
	СтруктураВозврат.Вставить("ПроцентСкидки", ПроцентСкидки);
	СтруктураВозврат.Вставить("ПервыйВзнос", ПервыйВзнос);
	Закрыть(СтруктураВозврат);
	
КонецПроцедуры

&НаКлиенте
Процедура ПервыйВзносПриИзменении(Элемент)
	
	СуммаБезСкидки	= Формат(Сумма - ПервыйВзнос, "ЧДЦ=2");
	Скидка 			= Формат((Сумма - ПервыйВзнос) * ПроцентСкидки * 0.01, "ЧДЦ=2");
	СуммаСоСкидкой  = Формат((Сумма - ПервыйВзнос) - ((Сумма - ПервыйВзнос) * ПроцентСкидки * 0.01), "ЧДЦ=2");
	
КонецПроцедуры
