

#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	УстановитьПривилегированныйРежим(Истина);
	Если Параметры.Свойство("СерийныеНомераНоменклатуры") = Истина Тогда
		СерийныеНомераНоменклатуры = Параметры.СерийныеНомераНоменклатуры;
	КонецЕсли;
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы


&НаКлиенте
Процедура Записать(Команда)
	Отказ =ЛОЖЬ;
	ЗаписатьНаСервере(Отказ);
	Если Отказ = ЛОЖЬ Тогда
		Закрыть();	
	КонецЕсли;
КонецПроцедуры

#КонецОбласти


#Область СлужебныеПроцедурыИФункции
&НаСервере
Процедура ЗаписатьНаСервере(Отказ)

	СпрОбъект = СерийныеНомераНоменклатуры.ПолучитьОбъект();
	СпрОбъект.Распакован = Истина;
	СпрОбъект.Ответственный = ПараметрыСеанса.ТекущийПользователь;
	СпрОбъект.Дата = ТекущаяДата();
	СпрОбъект.Комментарий = Комментарий;
	Попытка
        СпрОбъект.Записать();
	Исключение
		Отказ = Истина;
		СообщенияОбОшибке = НСтр("ru='Не удалось записать элемент справочника  Серийные номера номенклатуры.'"+ ОписаниеОшибки(), ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());
        ОбщегоНазначенияКлиентСервер.СообщитьПользователю(СообщенияОбОшибке);
    КонецПопытки; 
КонецПроцедуры // ЗаписатьНаСервере()


#КонецОбласти